# Final Data Flow v2.7 - Complete Visual Guide

**Date**: October 16, 2025  
**Status**: IMPLEMENTED & TESTED  
**Reflects**: Current working implementation

---

## ğŸ¯ **Complete User Journey with Data Flow**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         STEP 1: USER UPLOADS                             â”‚
â”‚                                                                           â”‚
â”‚  User Action: Create job, upload files                                   â”‚
â”‚  Files: ğŸ“„ Resume.docx, ğŸ’¼ JD.pdf, âœ‰ï¸ CoverLetter.docx                 â”‚
â”‚  Cost: FREE                                                              â”‚
â”‚  Time: Instant                                                           â”‚
â”‚  Stored: /data/attachments/[jobId]/                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ (Automatic, background)
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STEP 2: AUTO LOCAL TEXT EXTRACTION                     â”‚
â”‚                                                                           â”‚
â”‚  Trigger: Automatic after upload (background process)                    â”‚
â”‚  Tools: mammoth (DOCX), pdf-parse (PDF), fs.readFile (TXT)             â”‚
â”‚  Cost: FREE (local compute)                                             â”‚
â”‚  Time: ~500ms per file                                                  â”‚
â”‚                                                                           â”‚
â”‚  Resume.docx  â†’  "John Smith\nSenior Product Manager..."                â”‚
â”‚  JD.pdf       â†’  "We are seeking a Product Manager..."                  â”‚
â”‚  Cover.docx   â†’  "Dear Hiring Manager..."                               â”‚
â”‚                                                                           â”‚
â”‚  Stored As: artifact_variants (variant_type='raw')                      â”‚
â”‚  Token Count: ~2,500 per document (full text)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI SHOWS: ğŸ“„ Purple Banner                            â”‚
â”‚                                                                           â”‚
â”‚  [â†“] ğŸ“„ Extract Data First Â· Upload docs, then click "Refresh Data"     â”‚
â”‚               to create AI-ready versions (~$0.02)                       â”‚
â”‚                                                                           â”‚
â”‚  Button: [Refresh Data ~$0.02]                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                       USER CLICKS "Refresh Data"
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STEP 3: AI STRUCTURED EXTRACTION                        â”‚
â”‚                                                                           â”‚
â”‚  Trigger: User clicks "Refresh Data" button                             â”‚
â”‚  Tool: GPT-4o Mini API                                                  â”‚
â”‚  Cost: ~$0.01 per document Ã— 3 docs = ~$0.02 total                     â”‚
â”‚  Time: ~2-3 seconds per file                                            â”‚
â”‚                                                                           â”‚
â”‚  For EACH 'raw' variant:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 1. Fetch 'raw' text from database                            â”‚      â”‚
â”‚  â”‚ 2. Send to AI: "Extract structured data from this text..."   â”‚      â”‚
â”‚  â”‚ 3. AI returns structured JSON                                â”‚      â”‚
â”‚  â”‚ 4. Store as 'ai_optimized' (compact, 500 tokens)            â”‚      â”‚
â”‚  â”‚ 5. Store as 'detailed' (complete, 1500 tokens)               â”‚      â”‚
â”‚  â”‚ 6. Calculate contentHash for change detection                â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                           â”‚
â”‚  Resume Raw Text (2,500 tokens)                                          â”‚
â”‚         â†“                                                                â”‚
â”‚  AI Extraction                                                           â”‚
â”‚         â†“                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ ai_optimized        â”‚        â”‚ detailed            â”‚                â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€            â”‚                â”‚
â”‚  â”‚ {                   â”‚        â”‚ {                   â”‚                â”‚
â”‚  â”‚   "name": "John",   â”‚        â”‚   "name": "John",   â”‚                â”‚
â”‚  â”‚   "skills": [       â”‚        â”‚   "skills": [       â”‚                â”‚
â”‚  â”‚     "PM",           â”‚        â”‚     {               â”‚                â”‚
â”‚  â”‚     "Agile"         â”‚        â”‚       "name": "PM", â”‚                â”‚
â”‚  â”‚   ],                â”‚        â”‚       "years": 5,   â”‚                â”‚
â”‚  â”‚   "experience": [   â”‚        â”‚       "level":"exp" â”‚                â”‚
â”‚  â”‚     {...}           â”‚        â”‚     },              â”‚                â”‚
â”‚  â”‚   ]                 â”‚        â”‚     ...             â”‚                â”‚
â”‚  â”‚ }                   â”‚        â”‚   ],                â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚   "experience": [   â”‚                â”‚
â”‚  â”‚ ~500 tokens         â”‚        â”‚     {               â”‚                â”‚
â”‚  â”‚ Used in prompts     â”‚        â”‚       "company":".."â”‚                â”‚
â”‚  â”‚ SAVES MONEY!        â”‚        â”‚       "achievements"â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚       ...           â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚     }               â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚   ]                 â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚ }                   â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚                     â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚ ~1,500 tokens       â”‚                â”‚
â”‚  â”‚                     â”‚        â”‚ For profiles        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                           â”‚
â”‚  âš ï¸ STOPS HERE - NO ANALYSIS YET! âš ï¸                                    â”‚
â”‚  Just creates variants, ready for individual section analysis            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI SHOWS: ğŸŒŸ Blue Banner                              â”‚
â”‚                                                                           â”‚
â”‚  [â†“] ğŸŒŸ Data Ready Â· AI data extracted Â· Scroll to sections and click   â”‚
â”‚               "Analyze" buttons                                          â”‚
â”‚                                                                           â”‚
â”‚  Expanded View:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ğŸ“ Input Documents (3)                                     â”‚         â”‚
â”‚  â”‚ [ğŸ“„ Resume v1] [View Variants] â† 3-column viewer          â”‚         â”‚
â”‚  â”‚ [ğŸ’¼ JD v1] [View Variants]                                 â”‚         â”‚
â”‚  â”‚ [âœ‰ï¸ Cover v1] [View Variants]                              â”‚         â”‚
â”‚  â”‚                                                             â”‚         â”‚
â”‚  â”‚ Ready: [ğŸ¯ Match] [ğŸ¢ Company] [ğŸŒ Ecosystem] [ğŸ‘¤ Profile]â”‚         â”‚
â”‚  â”‚        â†‘ Click to scroll to that section                   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    USER SCROLLS TO SECTION & CLICKS "Analyze"
                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                   â–¼                â–¼                â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4a:     â”‚  â”‚ STEP 4b:     â”‚  â”‚ STEP 4c:     â”‚  â”‚ STEP 4d:     â”‚  â”‚ STEP 4e:     â”‚
â”‚ MATCH SCORE  â”‚  â”‚ COMPANY      â”‚  â”‚ ECOSYSTEM    â”‚  â”‚ USER         â”‚  â”‚ MATCH        â”‚
â”‚              â”‚  â”‚ INTELLIGENCE â”‚  â”‚ MATRIX       â”‚  â”‚ PROFILE      â”‚  â”‚ MATRIX       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                 â”‚                 â”‚                 â”‚
       â–¼                 â–¼                 â–¼                 â–¼                 â–¼
 Uses:              Uses:             Uses:             Uses:             Uses:
 â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€
 â€¢ Resume           â€¢ JD              â€¢ JD              â€¢ Resume          â€¢ Resume
   ai_optimized       ai_optimized      ai_optimized      ai_optimized      ai_optimized
 â€¢ JD               â€¢ Company         â€¢ Company         â€¢ JD              â€¢ JD
   ai_optimized       name              name              ai_optimized      ai_optimized
                    â€¢ WEB SEARCH!     â€¢ Company                           â€¢ Match
                      (5 searches)      intel (opt)                         signals
       â”‚                 â”‚                 â”‚                 â”‚                 â”‚
 Cost: ~$0.05      Cost: ~$0.10      Cost: ~$0.05      Cost: ~$0.05      Cost: ~$0.08
 Time: 3-5s        Time: 5-10s       Time: 3-5s        Time: 4-6s        Time: 5-8s
       â”‚                 â”‚                 â”‚                 â”‚                 â”‚
       â–¼                 â–¼                 â–¼                 â–¼                 â–¼
 Returns:          Returns:          Returns:          Returns:          Returns:
 â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€
 {                 {                 {                 {                 {
  "overallScore"    "company": {      "ecosystem": [    "jobSpecific": {  "signals": [
   : 0.85,            "name":"...",     {                 "keyStrengths"    {
  "categoryBreak     "founded":...,     "name":"Notion   : [...],          "name":"...",
   down": {           "culture":[..]     "category":      "achievements"    "score":0.75,
    "technical":      "competitors"      "direct",        : [...],          "weight":0.02
     0.82,            : [...]            "relevance":85   "starStories":    "evidence":"."
    ...              },                 },               : [...],          },
   },                "sources":[...]    ...              "gapPlan":[...]   ...50 total
  "topStrengths"   }                   ],                "valueProps":[.]  ],
   : [...],                             "insights":[...]  },               "overall":87
  "topGaps":[...],                     }                 "globalInsights"  }
  "recommendation"                                        : [...]
   : "..."                                               }
 }                                                    
       â”‚                 â”‚                 â”‚                 â”‚                 â”‚
       â–¼                 â–¼                 â–¼                 â–¼                 â–¼
 Stored in:        Stored in:        Stored in:        Stored in:        Stored in:
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 â€¢ TODO: DB        â€¢ TODO: DB        â€¢ TODO: DB        â€¢ user_profile    â€¢ TODO: DB
   table             table             table             (singleton)       table
 â€¢ Displayed       â€¢ Displayed       â€¢ Displayed       â€¢ job_profiles    â€¢ Displayed
   in UI             in UI             in UI             (per job)         in UI
       â”‚                 â”‚                 â”‚                 â”‚                 â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ STEP 5: PROFILE      â”‚
                         â”‚ ACCUMULATION         â”‚
                         â”‚                      â”‚
                         â”‚ From User Profile    â”‚
                         â”‚ Analysis:            â”‚
                         â”‚                      â”‚
                         â”‚ Job-Specific â†’ DB    â”‚
                         â”‚ Global Insights â†’    â”‚
                         â”‚   Merge to singleton â”‚
                         â”‚   user_profile       â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI SHOWS: âœ… Green Banner                             â”‚
â”‚                                                                           â”‚
â”‚  [â†“] âœ… All Current Â· Variants and analysis up-to-date Â· Re-analyze     â”‚
â”‚               anytime for latest insights                                â”‚
â”‚                                                                           â”‚
â”‚  Expanded View:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ğŸ“ Input Documents (3)                                     â”‚         â”‚
â”‚  â”‚ [ğŸ“„ Resume v1] [View Variants] â† See 3 columns            â”‚         â”‚
â”‚  â”‚ [ğŸ’¼ JD v1] [View Variants]                                 â”‚         â”‚
â”‚  â”‚ [âœ‰ï¸ Cover v1] [View Variants]                              â”‚         â”‚
â”‚  â”‚                                                             â”‚         â”‚
â”‚  â”‚ Ready: [ğŸ¯ Match] [ğŸ¢ Company] [ğŸŒ Ecosystem] [ğŸ‘¤ Profile]â”‚         â”‚
â”‚  â”‚        â†‘ Click to jump to section results                 â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                           â”‚
â”‚  User can:                                                               â”‚
â”‚  â€¢ View 3-column variant comparison                                     â”‚
â”‚  â€¢ Navigate to any analysis section                                     â”‚
â”‚  â€¢ Re-run individual sections anytime                                   â”‚
â”‚  â€¢ Upload new version â†’ Orange banner â†’ Re-extract                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ **The 3 Variant Versions (Side-by-Side)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ RAW              â”‚  ğŸ¤– AI-OPTIMIZED     â”‚  ğŸ“‹ DETAILED         â”‚
â”‚  (Local Extract)     â”‚  (Compact)           â”‚  (Complete)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SOURCE:              â”‚ SOURCE:              â”‚ SOURCE:              â”‚
â”‚ mammoth/pdf-parse    â”‚ GPT-4o Mini          â”‚ GPT-4o Mini          â”‚
â”‚                      â”‚                      â”‚ (same call)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ COST:                â”‚ COST:                â”‚ COST:                â”‚
â”‚ FREE                 â”‚ ~$0.01 per doc       â”‚ Included             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIZE:                â”‚ SIZE:                â”‚ SIZE:                â”‚
â”‚ ~2,500 tokens        â”‚ ~500 tokens          â”‚ ~1,500 tokens        â”‚
â”‚ (Full document)      â”‚ (80% smaller!)       â”‚ (Full fields)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FORMAT:              â”‚ FORMAT:              â”‚ FORMAT:              â”‚
â”‚ Plain text string    â”‚ Structured JSON      â”‚ Structured JSON      â”‚
â”‚                      â”‚ (compact)            â”‚ (extended)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ USED FOR:            â”‚ USED FOR:            â”‚ USED FOR:            â”‚
â”‚ â€¢ Backup             â”‚ â€¢ ALL ANALYSIS       â”‚ â€¢ Profile building   â”‚
â”‚ â€¢ Debugging          â”‚   PROMPTS            â”‚ â€¢ Future features    â”‚
â”‚ â€¢ Re-extraction      â”‚ â€¢ Cost savings       â”‚ â€¢ Data mining        â”‚
â”‚ â€¢ Verify quality     â”‚ â€¢ Quick context      â”‚ â€¢ Extended analysis  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EXAMPLE:             â”‚ EXAMPLE:             â”‚ EXAMPLE:             â”‚
â”‚                      â”‚                      â”‚                      â”‚
â”‚ "John Smith          â”‚ {                    â”‚ {                    â”‚
â”‚ Senior Product       â”‚   "name": "John",    â”‚   "name": "John",    â”‚
â”‚ Manager              â”‚   "role": "Sr PM",   â”‚   "role": {          â”‚
â”‚                      â”‚   "skills": [        â”‚     "title":"Sr PM", â”‚
â”‚ EXPERIENCE           â”‚     "PM",            â”‚     "level":"senior" â”‚
â”‚ Google Inc.          â”‚     "Agile",         â”‚   },                 â”‚
â”‚ Senior PM            â”‚     "SQL"            â”‚   "skills": [        â”‚
â”‚ 2020-2023            â”‚   ],                 â”‚     {                â”‚
â”‚ â€¢ Led team of 12     â”‚   "experience": [    â”‚       "name": "PM",  â”‚
â”‚ â€¢ Launched search    â”‚     {                â”‚       "years": 5,    â”‚
â”‚   feature            â”‚       "company":"G", â”‚       "proficiency"  â”‚
â”‚ â€¢ 10M+ DAU           â”‚       "role":"PM",   â”‚        :"expert",    â”‚
â”‚                      â”‚       "years": 3     â”‚       "certs":[".."] â”‚
â”‚ SKILLS               â”‚     }                â”‚     },               â”‚
â”‚ Product Mgmt,        â”‚   ],                 â”‚     ...              â”‚
â”‚ Agile, SQL,          â”‚   "education": {     â”‚   ],                 â”‚
â”‚ Python..."           â”‚     "degree":"MBA",  â”‚   "experience": [    â”‚
â”‚                      â”‚     "school":"Stan"  â”‚     {                â”‚
â”‚                      â”‚   }                  â”‚       "company":"G", â”‚
â”‚                      â”‚ }                    â”‚       "role":"PM",   â”‚
â”‚                      â”‚                      â”‚       "duration":"3y"â”‚
â”‚                      â”‚                      â”‚       "achievements" â”‚
â”‚                      â”‚                      â”‚        : ["10M DAU"],â”‚
â”‚                      â”‚                      â”‚       "technologies" â”‚
â”‚                      â”‚                      â”‚        : ["Python"], â”‚
â”‚                      â”‚                      â”‚       "team_size":12 â”‚
â”‚                      â”‚                      â”‚     }                â”‚
â”‚                      â”‚                      â”‚   ],                 â”‚
â”‚                      â”‚                      â”‚   "education": {     â”‚
â”‚                      â”‚                      â”‚     "degree":"MBA",  â”‚
â”‚                      â”‚                      â”‚     "school":"Stan", â”‚
â”‚                      â”‚                      â”‚     "year": 2018,    â”‚
â”‚                      â”‚                      â”‚     "gpa": 3.8       â”‚
â”‚                      â”‚                      â”‚   }                  â”‚
â”‚                      â”‚                      â”‚ }                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **Analysis Sections - What Can Run**

### **âœ… CAN RUN (4 sections):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ MATCH SCORE                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  Required: Resume ai_optimized + JD ai_optimized                 â”‚
â”‚  Available: âœ… YES (created by "Refresh Data")                   â”‚
â”‚  Cost: ~$0.05                                                    â”‚
â”‚  Time: 3-5 seconds                                               â”‚
â”‚  Endpoint: POST /api/jobs/[id]/analyze-match-score              â”‚
â”‚  Prompt: prompts/matchScore.v1.md                                â”‚
â”‚                                                                  â”‚
â”‚  Returns:                                                        â”‚
â”‚  â€¢ Overall score (85%)                                           â”‚
â”‚  â€¢ Category breakdown (technical/experience/soft)                â”‚
â”‚  â€¢ Top 3-5 strengths                                             â”‚
â”‚  â€¢ Top 3-5 gaps                                                  â”‚
â”‚  â€¢ Quick recommendation                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¢ COMPANY INTELLIGENCE                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  Required: JD ai_optimized + company name + WEB SEARCH           â”‚
â”‚  Available: âœ… YES (JD variant + web search GRANTED)             â”‚
â”‚  Cost: ~$0.10 (includes up to 5 web searches)                    â”‚
â”‚  Time: 5-10 seconds                                              â”‚
â”‚  Endpoint: POST /api/jobs/[id]/analyze-company                   â”‚
â”‚  Prompt: prompts/company.v1.md                                   â”‚
â”‚                                                                  â”‚
â”‚  Web Searches:                                                   â”‚
â”‚  â€¢ Company website                                               â”‚
â”‚  â€¢ Recent news/press releases                                    â”‚
â”‚  â€¢ LinkedIn company page                                         â”‚
â”‚  â€¢ Glassdoor reviews                                             â”‚
â”‚  â€¢ Funding announcements                                         â”‚
â”‚                                                                  â”‚
â”‚  Returns:                                                        â”‚
â”‚  â€¢ Company overview (founded, employees, funding)                â”‚
â”‚  â€¢ Key facts (revenue, growth, achievements)                     â”‚
â”‚  â€¢ Culture & values                                              â”‚
â”‚  â€¢ Leadership team                                               â”‚
â”‚  â€¢ Competitors list                                              â”‚
â”‚  â€¢ Sources (URLs used)                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ COMPANY ECOSYSTEM MATRIX                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  Required: JD ai_optimized + company name                        â”‚
â”‚  Available: âœ… YES (created by "Refresh Data")                   â”‚
â”‚  Cost: ~$0.05                                                    â”‚
â”‚  Time: 3-5 seconds                                               â”‚
â”‚  Endpoint: POST /api/jobs/[id]/analyze-ecosystem                 â”‚
â”‚  Prompt: prompts/companyEcosystem.v1.md                          â”‚
â”‚                                                                  â”‚
â”‚  Returns:                                                        â”‚
â”‚  â€¢ 15-25 related companies                                       â”‚
â”‚  â€¢ Categorized: direct/adjacent/upstream/downstream/complement   â”‚
â”‚  â€¢ Relevance scores (0-100)                                      â”‚
â”‚  â€¢ Career opportunity (high/medium/low)                          â”‚
â”‚  â€¢ Interview relevance flags                                     â”‚
â”‚  â€¢ Summary insights                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ USER PROFILE (Job-Specific + Global)                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  Required: Resume ai_optimized + JD ai_optimized                 â”‚
â”‚  Available: âœ… YES (created by "Refresh Data")                   â”‚
â”‚  Cost: ~$0.05                                                    â”‚
â”‚  Time: 4-6 seconds                                               â”‚
â”‚  Endpoint: POST /api/jobs/[id]/analyze-user-profile              â”‚
â”‚  Prompt: prompts/userProfile.v1.md                               â”‚
â”‚                                                                  â”‚
â”‚  Builds TWO Profiles:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ JOB-SPECIFIC PROFILE:                            â”‚           â”‚
â”‚  â”‚ â€¢ Key strengths for THIS role                    â”‚           â”‚
â”‚  â”‚ â€¢ Relevant achievements (STAR stories)           â”‚           â”‚
â”‚  â”‚ â€¢ Skills categorized (strong/developing/missing) â”‚           â”‚
â”‚  â”‚ â€¢ Gap closing plans                              â”‚           â”‚
â”‚  â”‚ â€¢ Interview stories (5-7)                        â”‚           â”‚
â”‚  â”‚ â€¢ Unique value propositions                      â”‚           â”‚
â”‚  â”‚                                                   â”‚           â”‚
â”‚  â”‚ Stored: job_profiles table (per job)             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ GLOBAL PROFILE:                                  â”‚           â”‚
â”‚  â”‚ â€¢ Generic insights applicable to ALL jobs        â”‚           â”‚
â”‚  â”‚ â€¢ Cross-job skills inventory                     â”‚           â”‚
â”‚  â”‚ â€¢ Career trajectory patterns                     â”‚           â”‚
â”‚  â”‚ â€¢ Reusable achievements                          â”‚           â”‚
â”‚  â”‚                                                   â”‚           â”‚
â”‚  â”‚ Stored: user_profile table (singleton)           â”‚           â”‚
â”‚  â”‚ Merged: New insights added, no duplicates        â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚  View Profile: http://localhost:3000/profile                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **âŒ CANNOT RUN (3 sections - need LinkedIn URLs):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ RECRUITER / HIRING MANAGER / PEER PROFILES                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  Required: Resume ai_optimized + LINKEDIN URL (NOT PROVIDED!)    â”‚
â”‚  Available: âŒ NO - User hasn't entered LinkedIn URLs yet        â”‚
â”‚  Status: BLOCKED until user provides URLs                        â”‚
â”‚                                                                  â”‚
â”‚  User must:                                                      â”‚
â”‚  1. Add UI to input LinkedIn URLs (TODO)                         â”‚
â”‚  2. Extract profile data from LinkedIn                           â”‚
â”‚  3. Then can analyze compatibility, communication style          â”‚
â”‚                                                                  â”‚
â”‚  Badge shows: [ğŸ‘¥ Add LinkedIn URLs] (grayed/disabled)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° **Complete Cost Breakdown**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     COST ANALYSIS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  STEP 2: Local Text Extraction (raw)                             â”‚
â”‚  Cost: FREE                                                      â”‚
â”‚  Tokens: ~7,500 total (3 docs Ã— 2,500)                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  STEP 3: AI Variant Extraction (ai_optimized + detailed)         â”‚
â”‚  Cost: ~$0.02 total                                              â”‚
â”‚  Breakdown:                                                      â”‚
â”‚    â€¢ Resume: ~$0.007 (2,500 in â†’ 500+1,500 out)                 â”‚
â”‚    â€¢ JD: ~$0.006 (800 in â†’ 300+900 out)                         â”‚
â”‚    â€¢ Cover: ~$0.007 (1,000 in â†’ 400+1,200 out)                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  STEP 4a: Match Score Analysis                                  â”‚
â”‚  Cost: ~$0.05                                                    â”‚
â”‚  Uses: Resume ai_optimized (500) + JD ai_optimized (300)        â”‚
â”‚  Prompt: ~200 tokens                                             â”‚
â”‚  Output: ~1,000 tokens                                           â”‚
â”‚  Total: ~2,000 tokens                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  STEP 4b: Company Intelligence                                   â”‚
â”‚  Cost: ~$0.10                                                    â”‚
â”‚  Uses: JD ai_optimized (300)                                     â”‚
â”‚  Web Search: 5 searches (~$0.05)                                 â”‚
â”‚  Prompt: ~300 tokens                                             â”‚
â”‚  Output: ~2,000 tokens                                           â”‚
â”‚  Total: ~2,600 tokens + web search                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  STEP 4c: Ecosystem Matrix                                       â”‚
â”‚  Cost: ~$0.05                                                    â”‚
â”‚  Uses: JD ai_optimized (300) + company data (500)               â”‚
â”‚  Prompt: ~200 tokens                                             â”‚
â”‚  Output: ~1,500 tokens                                           â”‚
â”‚  Total: ~2,500 tokens                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  STEP 4d: User Profile                                           â”‚
â”‚  Cost: ~$0.05                                                    â”‚
â”‚  Uses: Resume ai_optimized (500) + JD ai_optimized (300)        â”‚
â”‚  Prompt: ~300 tokens                                             â”‚
â”‚  Output: ~2,000 tokens                                           â”‚
â”‚  Total: ~3,100 tokens                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  STEP 4e: Match Matrix (50 signals)                              â”‚
â”‚  Cost: ~$0.08                                                    â”‚
â”‚  Uses: Resume ai_optimized (500) + JD ai_optimized (300)        â”‚
â”‚  Prompt: ~500 tokens (includes 50 signal definitions)           â”‚
â”‚  Output: ~3,000 tokens (50 signals Ã— 60 tokens each)            â”‚
â”‚  Total: ~4,300 tokens                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  GRAND TOTAL:                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•                                                    â”‚
â”‚  Variants: $0.02                                                 â”‚
â”‚  Analysis: $0.33                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  TOTAL: ~$0.35 for complete analysis                             â”‚
â”‚                                                                  â”‚
â”‚  vs. OLD WAY (without variants):                                 â”‚
â”‚  Each section re-processes full 2,500-token resume               â”‚
â”‚  5 sections Ã— ~$0.30 = ~$1.50 total                             â”‚
â”‚                                                                  â”‚
â”‚  SAVINGS: 77% cost reduction! ğŸ‰                                 â”‚
â”‚  ($0.35 vs $1.50)                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ **Data Flow by Section**

### **Match Score Analysis:**
```
User clicks "Analyze Match" in Match section
         â†“
Fetch ai_optimized variants from DB
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load prompt: matchScore.v1.md           â”‚
â”‚ Replace {{resumeVariant}}               â”‚
â”‚ Replace {{jdVariant}}                   â”‚
â”‚ Replace {{companyName}}                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Send to AI: GPT-4o Mini
         â†“
AI returns:
{
  "overallScore": 0.85,
  "categoryBreakdown": {...},
  "topStrengths": [...],
  "topGaps": [...],
  "recommendation": "..."
}
         â†“
Store in DB (TODO: match_score table)
         â†“
Display in Match section UI
```

### **Company Intelligence:**
```
User clicks "Analyze Company" in Company section
         â†“
Fetch JD ai_optimized variant
         â†“
Extract company name from variant or job.company
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load prompt: company.v1.md              â”‚
â”‚ Replace {{jdVariant}}                   â”‚
â”‚ Replace {{companyName}}                 â”‚
â”‚ Grant web search permission (5 searches)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Send to AI: GPT-4o Mini + web search
         â†“
AI performs web research:
â€¢ Searches company website
â€¢ Finds LinkedIn page
â€¢ Checks recent news
â€¢ Gathers funding info
â€¢ Reviews Glassdoor
         â†“
AI returns:
{
  "company": {
    "name": "...",
    "founded": 2018,
    "culture": [...],
    "competitors": [...]
  },
  "sources": ["https://...", ...]
}
         â†“
Store in DB (TODO: company_intel table)
         â†“
Display in Company Intelligence section UI
```

### **Ecosystem Matrix:**
```
User clicks "Analyze Ecosystem" in Ecosystem section
         â†“
Fetch JD ai_optimized variant
         â†“
Fetch company intelligence (if available)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load prompt: companyEcosystem.v1.md     â”‚
â”‚ Replace {{jdVariant}}                   â”‚
â”‚ Replace {{companyName}}                 â”‚
â”‚ Replace {{companyIntel}} (optional)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Send to AI: GPT-4o Mini
         â†“
AI returns:
{
  "ecosystem": [
    {
      "name": "Notion",
      "category": "direct",
      "relevanceScore": 95,
      "careerOpportunity": "high",
      ...
    },
    ...15-25 companies
  ],
  "insights": [...]
}
         â†“
Store in DB (TODO: company_ecosystem table)
         â†“
Display in Ecosystem section UI
```

### **User Profile:**
```
User clicks "Analyze Profile" in Profile section
         â†“
Fetch resume + JD ai_optimized variants
         â†“
Fetch existing global profile (if any)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load prompt: userProfile.v1.md          â”‚
â”‚ Replace {{resumeVariant}}               â”‚
â”‚ Replace {{jdVariant}}                   â”‚
â”‚ Replace {{globalProfile}}               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Send to AI: GPT-4o Mini
         â†“
AI returns:
{
  "jobSpecific": {
    "keyStrengths": [...],
    "achievements": [
      {
        "achievement": "...",
        "starStory": {S,T,A,R}
      }
    ],
    "skillsForThisRole": {
      "strong": [...],
      "developing": [...],
      "missing": [...]
    },
    "interviewStories": [...],
    ...
  },
  "globalInsights": [
    {
      "insight": "Strong at scale",
      "category": "product_impact",
      "applicableToFutureJobs": true
    }
  ]
}
         â†“
Store job-specific: job_profiles table
         â†“
Merge global insights: user_profile table (singleton)
         â†“
Display in Profile section UI
         â†“
Also available at: /profile page
```

### **Match Matrix (50 Signals):**
```
User clicks "Analyze Match Matrix"
         â†“
Fetch resume + JD ai_optimized variants
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load prompt: matchSignals.v1.md         â”‚
â”‚ Replace {{resumeVariant}}               â”‚
â”‚ Replace {{jdVariant}}                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
Send to AI: GPT-4o Mini
         â†“
AI returns:
{
  "signals": [
    {
      "id": "ats-tech-stack",
      "name": "Required tech stack",
      "category": "technical",
      "weight": 0.08,
      "score": 0.75,
      "evidence": "...",
      "reasoning": "..."
    },
    ...50 signals total
  ],
  "categoryScores": {...},
  "overallScore": 0.87
}
         â†“
Store in DB (signal_evaluations table - already exists!)
         â†“
Display in Match Matrix section UI
```

---

## ğŸ“Š **Data Reuse Visualization**

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Resume        â”‚
                    â”‚   ai_optimized  â”‚
                    â”‚   (500 tokens)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚                    â”‚              â”‚
         â–¼                   â–¼                    â–¼              â–¼
    Match Score        Match Matrix        User Profile    (Future)
    Uses 500 tok       Uses 500 tok        Uses 500 tok    More sections
    Saves $0.15!       Saves $0.15!        Saves $0.15!    Keep saving!
    
    
    WITHOUT variants (old way):
    Each section uses full 2,500-token raw resume
         â†“
    5 sections Ã— 2,500 tokens = 12,500 tokens wasted
         â†“
    Extra cost: ~$1.15
    
    
    WITH variants (new way):
    All sections share one 500-token ai_optimized variant
         â†“
    5 sections Ã— 500 tokens = 2,500 tokens (vs 12,500!)
         â†“
    Saved: ~$1.15 ğŸ’°
```

---

## ğŸ¯ **Summary: What Works Right Now**

### **âœ… READY TO USE:**
1. âœ… Upload documents
2. âœ… Auto raw extraction (background, free)
3. âœ… Click "Refresh Data" (~$0.02)
4. âœ… View 3-column variants (verify quality)
5. âœ… Analyze Match Score (~$0.05)
6. âœ… Analyze Company Intel (~$0.10 with web search)
7. âœ… Analyze Ecosystem (~$0.05)
8. âœ… Analyze User Profile (~$0.05)
9. âœ… Analyze Match Matrix (~$0.08)
10. âœ… View global profile at `/profile`

### **â³ COMING LATER:**
- Recruiter profiles (need LinkedIn URL input UI)
- Hiring Manager profiles (need LinkedIn URL input UI)
- Peer/Panel profiles (need LinkedIn URL input UI)

### **Total Cost for Complete Analysis:**
**~$0.35** (vs ~$1.50 old way = **77% savings!**)

---

## ğŸŠ **The Complete Picture**

```
USER UPLOADS
     â†“ (FREE)
LOCAL EXTRACT (raw)
     â†“ (FREE)
"REFRESH DATA" BUTTON
     â†“ ($0.02)
AI EXTRACT (ai_optimized + detailed)
     â†“
BLUE BANNER: "Data Ready"
     â†“
USER SCROLLS TO SECTIONS
     â†“
CLICKS INDIVIDUAL "ANALYZE" BUTTONS
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Match    â”‚ Company  â”‚ Ecosystem â”‚   User     â”‚   Match    â”‚
â”‚   Score    â”‚  Intel   â”‚  Matrix   â”‚  Profile   â”‚   Matrix   â”‚
â”‚  (~$0.05)  â”‚ (~$0.10) â”‚ (~$0.05)  â”‚  (~$0.05)  â”‚  (~$0.08)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              GREEN BANNER: "All Current"
                         â”‚
                         â–¼
           User can view results, re-analyze anytime,
           upload new version â†’ starts over
```

---

**This is the FINAL, ACCURATE data flow!** ğŸ‰

