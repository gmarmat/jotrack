
Running 15 tests using 1 worker

(node:37956) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:37956) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
  ✘   1 [chromium] › e2e/coach-mode-error-handling.spec.ts:32:7 › Phase 3: Error Handling & Edge Cases › E2E-01: Discovery wizard handles very long text (10K words) (30.1s)
(node:38215) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:38215) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
⚠️ E2E-02: No wizard, skipping
  -   2 [chromium] › e2e/coach-mode-error-handling.spec.ts:67:7 › Phase 3: Error Handling & Edge Cases › E2E-02: Handles special characters, emojis, unicode
  -   3 [chromium] › e2e/coach-mode-error-handling.spec.ts:96:7 › Phase 3: Error Handling & Edge Cases › E2E-03: Page refresh mid-save doesn't corrupt data
⚠️ E2E-04: Wizard not available, skipping
  -   4 [chromium] › e2e/coach-mode-error-handling.spec.ts:130:7 › Phase 3: Error Handling & Edge Cases › E2E-04: Multiple tabs don't corrupt data
⚠️ E2E-05: Placeholder - requires API key mocking
  -   5 [chromium] › e2e/coach-mode-error-handling.spec.ts:180:7 › Phase 3: Error Handling & Edge Cases › E2E-05: Missing AI API key shows helpful error
⚠️ E2E-06: Placeholder - requires API mocking
  -   6 [chromium] › e2e/coach-mode-error-handling.spec.ts:190:7 › Phase 3: Error Handling & Edge Cases › E2E-06: Long AI API calls show progress indicator
⚠️ E2E-07: Placeholder - requires database locking simulation
  -   7 [chromium] › e2e/coach-mode-error-handling.spec.ts:200:7 › Phase 3: Error Handling & Edge Cases › E2E-07: Database locked error handled gracefully
  -   8 [chromium] › e2e/coach-mode-error-handling.spec.ts:209:7 › Phase 3: Error Handling & Edge Cases › E2E-08: Browser back button during wizard preserves state
✅ E2E-09: Profile analysis works with all questions skipped
  ✓   9 [chromium] › e2e/coach-mode-error-handling.spec.ts:256:7 › Phase 3: Error Handling & Edge Cases › E2E-09: Can complete wizard with all questions skipped (51.7s)
  ✓ /coach/invalid-job-id-12345: Redirected to http://localhost:3000/
  ✓ /api/jobs/invalid-job-id-12345/coach/generate-discovery: 404
  ✘  10 [chromium] › e2e/coach-mode-error-handling.spec.ts:302:7 › Phase 3: Error Handling & Edge Cases › E2E-10: Invalid job ID handled in all coach routes (2.3s)
(node:38804) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:38804) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
✅ E2E-11: Recovered from malformed JSON
  ✓  11 [chromium] › e2e/coach-mode-error-handling.spec.ts:339:7 › Phase 3: Error Handling & Edge Cases › E2E-11: Recovers from malformed JSON in database (2.3s)
✅ E2E-12: Rapid clicks debounced correctly
  ✓  12 [chromium] › e2e/coach-mode-error-handling.spec.ts:368:7 › Phase 3: Error Handling & Edge Cases › E2E-12: Rapid clicks on generate button handled (7.9s)
  -  13 [chromium] › e2e/coach-mode-error-handling.spec.ts:397:7 › Phase 3: Error Handling & Edge Cases › E2E-13: Offline mode shows appropriate error
⚠️ E2E-14: Placeholder - tab state consistency check
  -  14 [chromium] › e2e/coach-mode-error-handling.spec.ts:433:7 › Phase 3: Error Handling & Edge Cases › E2E-14: Tab states remain consistent after operations
⚠️ E2E-15: Placeholder - requires resume editor access
  -  15 [chromium] › e2e/coach-mode-error-handling.spec.ts:447:7 › Phase 3: Error Handling & Edge Cases › E2E-15: Very long resume text handled


  1) [chromium] › e2e/coach-mode-error-handling.spec.ts:32:7 › Phase 3: Error Handling & Edge Cases › E2E-01: Discovery wizard handles very long text (10K words) 

    Error: locator.textContent: Error: strict mode violation: locator('text=/\\d+ \\/ \\d+ words/') resolved to 4 elements:
        1) <p class="text-xs text-red-600 dark:text-red-400 font-semibold">10000 / 500 words (over limit - please shorten)</p> aka getByText('10000 / 500 words (over limit')
        2) <p class="text-xs text-gray-500 dark:text-gray-400">0 / 500 words</p> aka getByText('/ 500 words').nth(1)
        3) <p class="text-xs text-gray-500 dark:text-gray-400">0 / 500 words</p> aka getByText('/ 500 words').nth(2)
        4) <p class="text-xs text-gray-500 dark:text-gray-400">0 / 500 words</p> aka getByText('/ 500 words').nth(3)

    Call log:
    [2m  - waiting for locator('text=/\\d+ \\/ \\d+ words/')[22m


      52 |     
      53 |     // Verify word limit is enforced
    > 54 |     const wordCountIndicator = await page.locator('text=/\\d+ \\/ \\d+ words/').textContent();
         |                                                                                 ^
      55 |     expect(wordCountIndicator).toBeTruthy();
      56 |     
      57 |     // Verify error message shown
        at /Users/guaravmarmat/Downloads/ai-projects/jotrack/e2e/coach-mode-error-handling.spec.ts:54:81

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/coach-mode-error-handling--4362f-s-very-long-text-10K-words--chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results/coach-mode-error-handling--4362f-s-very-long-text-10K-words--chromium/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/coach-mode-error-handling--4362f-s-very-long-text-10K-words--chromium/error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results/coach-mode-error-handling--4362f-s-very-long-text-10K-words--chromium/trace.zip
    Usage:

        npx playwright show-trace test-results/coach-mode-error-handling--4362f-s-very-long-text-10K-words--chromium/trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  2) [chromium] › e2e/coach-mode-error-handling.spec.ts:302:7 › Phase 3: Error Handling & Edge Cases › E2E-10: Invalid job ID handled in all coach routes 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[404, 500][39m

      317 |         });
      318 |         
    > 319 |         expect([404, 500]).toContain(res.status());
          |                            ^
      320 |         console.log(`  ✓ ${route}: ${res.status()}`);
      321 |       } else {
      322 |         // UI routes should redirect
        at /Users/guaravmarmat/Downloads/ai-projects/jotrack/e2e/coach-mode-error-handling.spec.ts:319:28

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/coach-mode-error-handling--a66d1-handled-in-all-coach-routes-chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results/coach-mode-error-handling--a66d1-handled-in-all-coach-routes-chromium/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/coach-mode-error-handling--a66d1-handled-in-all-coach-routes-chromium/error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results/coach-mode-error-handling--a66d1-handled-in-all-coach-routes-chromium/trace.zip
    Usage:

        npx playwright show-trace test-results/coach-mode-error-handling--a66d1-handled-in-all-coach-routes-chromium/trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  2 failed
    [chromium] › e2e/coach-mode-error-handling.spec.ts:32:7 › Phase 3: Error Handling & Edge Cases › E2E-01: Discovery wizard handles very long text (10K words) 
    [chromium] › e2e/coach-mode-error-handling.spec.ts:302:7 › Phase 3: Error Handling & Edge Cases › E2E-10: Invalid job ID handled in all coach routes 
  10 skipped
  3 passed (1.8m)
